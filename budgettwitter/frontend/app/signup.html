<!DOCTYPE html>
<html lang="en">

<head>

    <title>BudgetTwitter</title>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="shortcut icon" href="#">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">

    <script defer src="https://use.fontawesome.com/releases/v5.0.2/js/all.js"></script>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.css">

    <link href="https://fonts.googleapis.com/css?family=Abel" rel="stylesheet">

    <link rel="stylesheet" href="tweet.css">

</head>

<body ng-app="myApp" ng-controller="myControl">

<nav class="navbar navbar-expand-md navbar-dark bg-gunmetal">

    <div class="container">

        <a class="navbar-brand text-pastelyellow" href="dashboard.html">
            <strong>Home</strong>
        </a>

        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#primary-navigation" aria-controls="primary-navigation" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="primary-navigation">

            <ul class="navbar-nav ml-auto mt-2 mt-lg-0">


                <li class="nav-item">
                    <a class="nav-link text-pastelyellow hvr-underline-from-center" href="signin.html">
                        <i class="fas fa-sign-in-alt"></i> Login
                    </a>
                </li>
                <li class="nav-item">
                    <a class="nav-link text-pastelyellow hvr-underline-from-center" href="signup.html">
                        <i class="fas fa-user-plus"></i> Register
                    </a>
                </li>

            </ul>

        </div>
    </div>
</nav>

<section class="container wrapper section-sign-up">

    <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 offset-xl-3 offset-lg-3 offset-0">
        </div>
    </div>

    <div class="row">
        <div class="col-xl-6 col-lg-6 col-md-12 col-sm-12 col-xs-12 offset-xl-3 offset-lg-3 offset-0">

            <div class="card card-sign-up">
                <div class="card-body">
                    <h4 class="card-title">Sign Up</h4>
                    <hr class="hr-full">
                    <form action="localhost:3000/register">
                        <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text bg-junglegreen" id="basic-addon1">
                                        <i class="fas fa-user-circle text-white"></i>
                                    </span>
                                </div>
                                <input type="text" class="form-control" id="username" name="username" placeholder="Username" ng-model="username">
                            </div>
                        </div>

                        <div class="form-group">
                            <div class="input-group">
                                <input type="password" class="form-control" id="password" name="password" placeholder="Password" ng-model="password"/>
                                <div class="input-group-prepend">
                                    <span class="input-group-text bg-junglegreen" id="basic-addon2">
                                        <i class="fas fa-key text-white"></i>
                                    </span>
                                </div>
                            </div>
                        </div>

<!--                         <div class="form-group">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text bg-junglegreen" id="basic-addon3">
                                        <i class="fas fa-key text-white"></i>
                                    </span>
                                </div>
                                <input type="password" class="form-control" id="cpassword" name="cpassword" placeholder="Confirm Password"/>
                            </div>
                        </div> -->


<!--                         <div class="form-group">
                            <label for="profilepic"><i class="fas fa-image"></i> Profile Picture</label>
                            <input type="file" class="form-control-file" id="profilepic" name="profilepic" aria-describedby="fileHelp" ng-model="image"/>
                            <small id="fileHelp" class="form-text text-muted">File should be less than 3 mb</small>
                        </div> -->

                        <div class="form-group text-right">
                            <button type='submit' class="btn bg-junglegreen btn-signin text-white" ng-click="submitFun()">
                                <i class="fa fa-paper-plane" aria-hidden="true"></i>&nbsp;&nbsp;Submit
                            </button><br>
                        </div>

                    </form>
                </div>
            </div>

        </div>
    </div>
</section>

<!-- AngularJS Material Dependencies -->
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular-animate.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular-aria.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular-messages.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.7/angular-cookies.js"></script>

<!-- AngularJS Material Javascript now available via Google CDN; version 1.1.4 used here -->
<script src="https://ajax.googleapis.com/ajax/libs/angular_material/1.1.6/angular-material.min.js"></script>


<script>

    var app = angular.module("myApp", ['ngCookies']); 

    app.controller("myControl", function($scope, $http, $window, $rootScope, $cookies){

        $scope.submitFun = function() {
            console.log($scope.username + " " + $scope.password)
            console.log('http://localhost:3000/register?username=' + $scope.username + '&password=' + $scope.password)


            $scope.RedirectToURL = function() {
              var host = $window.location.host;
              var landingUrl = "http://localhost:3000/dashboard.html";
              $cookies.put('username', $scope.username)
              console.log($cookies.get('username'))
              console.log($scope.username)
              $window.location.href = landingUrl;
            };

            $http({
                method: 'GET', 
                url: 'http://localhost:3000/register?username=' + $scope.username + '&password=' + $scope.password
            }).then(function successCallback(response){
                console.log(response.data.success)
                if(response.data.success === true){
                    console.log("getting page")
                    $scope.RedirectToURL();
                }
            }, function errorCallback(response){
                console.log("Error response:" + response); 
            })
        }


    })

</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>

</body>

</html>